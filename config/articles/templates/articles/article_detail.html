{% extends "core/base.html" %}
{% load static %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

  {% include "core/components/breadcrumbs.html" %}
  <!-- Article Header -->
  <div class="mb-8">
    {% if article.image %}
      <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full rounded-lg shadow-md mb-4">
    {% endif %}
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
      <div>
        {% if article.category %}
          <a href="" class="text-sm text-indigo-600 font-semibold uppercase tracking-wide hover:underline">
            {{ article.category.name }}
          </a>
        {% endif %}
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mt-1">{{ article.title }}</h1>
      </div>
      <div class="text-gray-500 text-sm mt-2 sm:mt-0">
        <p>By <span class="font-medium">{{ article.author.username }}</span></p>
        <p>Published: {{ article.published_at|date:"F j, Y" }}</p>
      </div>
    </div>
    <p class="mt-4 text-gray-700 text-lg">{{ article.short_description }}</p>


    {% if article.tags.all %}
      <div class="mt-4 flex flex-wrap gap-2">
        {% for tag in article.tags.all %}
          <a href="" class="bg-indigo-100 text-indigo-800 text-xs font-semibold px-2.5 py-1 rounded hover:bg-indigo-200">
            #{{ tag.name }}
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  {% if exam_rules_urls %}
    {% for exam_rules_url in exam_rules_urls %}
    <div class="flex items-start gap-3 bg-red-50 rounded-xl p-4 border border-red-100 mb-10">

        <!-- Icon -->
        <svg class="w-5 h-5 text-red-600 shrink-0 mt-0.5"
            fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round"
            viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>

        <!-- Text -->
        <div class="text-sm text-red-900 leading-relaxed">

            <p class="font-semibold mb-1">
                Перед тестом обязательно прочитайте правила экзамена A1
            </p>

            <p class="text-red-800">
                90% ошибок происходят из-за незнания формата экзамена.
                Узнайте, как проходит тест и за что снимают баллы —
                <a href="{{ exam_rules_url }}" target="_blank"
                class="font-semibold underline underline-offset-2 hover:text-red-600 transition">
                ознакомиться с правилами →
                </a>
            </p>

        </div>

    </div>
    {% endfor %}
  {% endif %}

  <!-- Article Content -->
  <div class="prose prose-lg max-w-full mb-12">
    <div class="ck-content">
      {{ article.content|safe }}
    </div>
  </div>

  <!-- Comments Section -->
  {% include "articles/comment_section.html" %}
</div>
{% endblock %}



