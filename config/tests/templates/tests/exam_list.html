{% extends "core/base.html" %}

{% block title %}–≠–∫–∑–∞–º–µ–Ω—ã{% endblock %}

{% block content %}

<!-- Header -->
<section class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
    <div class="max-w-7xl mx-auto px-4 py-16">
        <h1 class="text-4xl font-bold mb-2">
            {% if header %}{{ header }}{% else %}–≠–∫–∑–∞–º–µ–Ω—ã{% endif %}
        </h1>
        <p class="text-blue-100">
            –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π –ø—Ä–æ–≥—Ä–µ—Å—Å
        </p>
    </div>
</section>

<!-- Exams -->
<section class="max-w-7xl mx-auto px-4 py-16">

    {% include "core/components/breadcrumbs.html" %}

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

        {% for exam in exams %}
            <div class="bg-white rounded-2xl shadow hover:shadow-xl transition p-6 flex flex-col">

                <h3 class="text-xl font-semibold mb-2">
                    {{ exam.title }}
                </h3>

                {% if exam.description %}
                    <p class="text-gray-600 text-sm mb-4 flex-grow">
                        {{ exam.description|truncatechars:120 }}
                    </p>
                {% endif %}

                <div class="text-sm text-gray-500 mb-4">
                    üìù –¢–µ—Å—Ç–æ–≤: <span class="font-medium">{{ exam.tests_count }}</span>
                </div>

                <div class="text-sm text-gray-500 mb-4">
                {% if exam.last_attempt_id %}
                    {% widthratio exam.user_score exam.user_total 100 as percent %}

                    <div class="mt-3">
                        <p class="text-sm text-gray-600">
                            –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
                            {{ exam.user_score }} / {{ exam.user_total }}
                            ({{ percent }}%)
                        </p>

                        <div class="w-full bg-gray-200 h-2 rounded mt-2">
                            <div class="bg-indigo-600 h-2 rounded"
                                style="width: {{ percent }}%"></div>
                        </div>
                    </div>
                {% else %}
                    <p class="text-gray-400 mt-3">
                        –≠–∫–∑–∞–º–µ–Ω –µ—â—ë –Ω–µ –Ω–∞—á–∞—Ç
                    </p>
                {% endif %}
                </div>

                <div class="mt-auto flex items-center justify-between">
                        <a href="{% url 'tests:exam_detail' exam.id %}"
                            class="inline-flex items-center text-sm text-white bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                                –ù–∞—á–∞—Ç—å
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                        </a>
                </div>

            </div>
        {% empty %}
            <p>–≠–∫–∑–∞–º–µ–Ω–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
        {% endfor %}

    </div>

</section>

{% endblock %}
